<template>
  <a-select @change="opChange" :value="defaultData.op">
    <a-select-option
      :value="item.value"
      v-for="item in opList"
      :key="item.value"
    >{{item.text}}</a-select-option>
  </a-select>
</template>
<script>
import { showError } from "@/framework/utils/index";
import { Select } from "ant-design-vue";
export default {
  name: "OpSelect",
  props: {
    defaultData: {
      type: Object,
      required: true
    },
    position: {
      type: String,
      required: true
    },
    targetid: {
      type: Number,
    }
  },
  components: {
    ASelect: Select,
    ASelectOption: Select.Option
  },
  computed: {
    opList() {
      return this.defaultData.opList;
    }
  },
  watch: {
    opList(opts){
      if(!this.defaultData.op && opts && opts.length){
        this.$store.commit({
          type: "SET_OP",
          position: this.position,
          op: opts[0].value
        });
      }
    }
  },
  methods: {
    opChange(value) {
      this.$store.commit({
        type: "SET_OP",
        position: this.position,
        op: value
      });
    },
  }
};
</script>