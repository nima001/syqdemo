<template>
  <div>
    <a-form-item 
      label="相关政府购买服务范围"
      :required="true" 
      :validateStatus="validateStatus"
      :label-col="itemLayout.labelCol" 
      :wrapper-col="itemLayout.wrapperCol"
      >
      <a-textarea
        v-model="propValue"
        :read-only="true"
        @click="showScopeSelect"
        :autoSize="{ minRows: 4, maxRows: 12 }"
        >
      </a-textarea>
    </a-form-item>
    <!--相关政府购买服务范围-->
    <a-modal
      title="政府采购目录"
      v-model="visible"
      :width="800"
      :bodyStyle="{ height: '600px', padding: '0' }"
      :footer="null"
    >
      <server-catalog></server-catalog>
    </a-modal>
  </div>
</template>

<script>
import { Input, Form, Modal } from "ant-design-vue";
import ServerCatalog from '@/person-shaoxing/views/assessment/compileAssist/components/ServerCatalog';
import set from 'lodash/set';
export default {
  props: {
    itemLayout: {
      type: Object
    }
  },
  components: { AFormItem: Form.Item, AInput: Input, ATextarea: Input.TextArea, AModal: Modal, ServerCatalog },
  data() {
    return {
      propValue: undefined,
      validateStatus: undefined,
      visible: false
    };
  },
  watch: {},
  computed: {},
  created() {},
  mounted() {},
  methods: {
    validateField(obj) {
      return new Promise((resolve, reject) => {
        this.validate((error) => {
          if(error) {
            reject(error);
          }else{
            set(obj, 'scope', this.propValue);
            resolve();
          }
        })
      })
    },
    validate(callback) {
      let status = undefined, error;
      if(!this.propValue && this.propValue !== 0) {
        status = 'error';
        error = `请选择相关政府购买服务范围`;
      }else{
        if(this.propValue) {
          status = 'success';
        }else{
          status = 'error';
          error = `相关政府购买服务范围格式不正确`;
        }
      }
      this.validateStatus = status;
      if(callback) {
        callback(error);
      }
    },
    onChange() {
      this.validate();
    },
    showScopeSelect() {
      this.visible = true;
    }
  },
};
</script>
<style lang="less" scoped>
</style>