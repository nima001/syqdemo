import request from '@/framework/utils/request'

//用户查询
export function userquery(data) {
    return request({
        url: '/person/user/query',
        method: 'post',
        dataType: 'json',
        data
    });
}

//人员信息
export function getUser(id) {
    return request({
        url: '/hall2/user/' + id,
        method: 'get'
    });
}


// 添加人员信息
export function createUser(data){
    return request({
        url:'/person/user',
        method:'post',
        dataType:'json',
        data
    })
}
//删除用户
export function reduceUser(data) {
    return request({
        url: '/person/user/reduce',
        method: 'post',
        dataType: 'json',
        data
    })
}
//更新人员信息
export function updateUser(id, data) {
    if(data.dept && Object.keys(data.dept).length==0){
        data.dept = null;
    }
    if(data.work && data.work.length){
        data.work.forEach(element => {
            if(element.workdept && Object.keys(element.workdept).length==0){
                element.workdept = null;
            }
        });
    }
    return request({
        url: '/person/user/' + id,
        method: 'post',
        dataType: 'json',
        data
    });
}


// 获取模型的表单
export function modelForm(model,userId){
    return request({
        url :`/hall2/modelprops/form/${model}?id=${userId}`,
        method: 'get'
    })
}

