<template>
  <div class="home_body">
    <div class="home_body_top">
      <div class="content">
        <div class="help">
          <img src="../../assets/img/helps.png" alt="">
          <img src="../../assets/img/more.png" alt="">
        </div>
        <ul class="statistical">
          <li class="statistical_list" v-for="(item,index) in statistical" :key="index">
            <p>{{item.num}}</p>
            <p>{{item.text}}</p>
            <p>{{item.date}}</p>
          </li>
        </ul>
        <div class="chart">
          <div class="register_chart chart_item">
            <div class="title">今日注册用户趋势图</div>
            <div class="date">2020/3/10</div>
            <div class="chart_container" id="register_container"></div>
          </div>
          <div class="login_chart chart_item">
            <div class="title">今日注册用户趋势图</div>
            <div class="date">2020/3/10</div>
            <div class="chart_container" id="login_container"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="home_body_bottom">
      <div class="left">
        <div class="title">
          <span>消息中心</span>
          <span>
            <img src="../../assets/img/more.png" alt="">
          </span>
        </div>
        <ul class="msg">
          <li class="msg_list" v-for="(list, index) in msgList" :key="index">
            <div>{{list.text}}</div>
            <div>{{list.date}}</div>
          </li>
        </ul>
      </div>
      <div class="right">
        <div class="title">
          <span>消息中心</span>
          <span>
            <img src="../../assets/img/more.png" alt="">
          </span>
        </div>
        <ul class="business">
          <li class="business_list" v-for="(list, index) in businessList" :key="index">
            <img :src="list.img" alt="">
            <span>{{list.text}}</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
</template>

<script>
import { Chart } from '@antv/g2';
import { test } from "../../api/login"
export default {
  props: {},
  components: {},
  data() {
    return {
      statistical: [
        { text: '用户总数', date: '2021/2/26', num: 100 },
        { text: '用户总数', date: '2021/2/26', num: 100 },
        { text: '用户总数', date: '2021/2/26', num: 100 },
        { text: '用户总数', date: '2021/2/26', num: 100 },
      ],
      msgList: [
        { text: '[微信小程序]业务平台接入', date: '15:23' },
        { text: '[微信小程序]业务平台接入', date: '15:23' },
        { text: '[微信小程序]业务平台接入', date: '15:23' },
        { text: '[微信小程序]业务平台接入', date: '15:23' },
        { text: '[微信小程序]业务平台接入', date: '15:23' },
      ],
      businessList: [
        { img: require("../../assets/img/business1.png"), text: '我向总理说句话' },
        { img: require("../../assets/img/business2.png"), text: '我向总理说句话' },
        { img: require("../../assets/img/business3.png"), text: '我向总理说句话' },
        { img: require("../../assets/img/business4.png"), text: '我向总理说句话' },
      ],
      chart: null,
      chartData: [
        { year: '1991', value: 15468 },
        { year: '1992', value: 16100 },
        { year: '1993', value: 15900 },
        { year: '1994', value: 17409 },
        { year: '1995', value: 17000 },
        { year: '1996', value: 31056 },
        { year: '1997', value: 31982 },
        { year: '1998', value: 32040 },
        { year: '1999', value: 33233 }
      ]
    };
  },
  watch: {},
  computed: {},
  created() {
    test()
    .then(res => {
      console.log(res);
    })
  },
  mounted() {
    this.intiChart('register_container')
    this.intiChart('login_container')
  },
  methods: {
    intiChart(id) {
      this.chart = new Chart({
        container: id,
        autoFit: true,
        height: 219,
      });

      this.chart.data(this.chartData);
      this.chart.scale({
        value: {
          min: 10000,
          nice: true,
        },
        year: {
          range: [0, 1],
        },
      });
      this.chart.tooltip({
        showCrosshairs: true,
        shared: true,
      });

      this.chart.axis('value', {
        label: {
          formatter: (val) => {
            return (+val / 10000).toFixed(1) + 'k';
          },
        },
      });

      this.chart.area().position('year*value');
      this.chart.line().position('year*value');

      this.chart.render();
    }
  },
};
</script>
<style lang="less" scoped>
.home_body {
  padding: @layout-space-base;
  height: 100%;
  .home_body_top{
    background-color: @white;
    height: 510px;
    border-radius: 5px;
    .content{
      height: 100%;
      padding: @padding-xs @padding-lg;
      .help{
        display: flex;
        justify-content: flex-end;
        align-items: center;
        padding: 12px 0;
        img{
          display: inline-block;
          margin-left: 14px;
          cursor: pointer;
        }
      }
      .statistical{
        display: flex;
        margin-bottom: 14px;
        .statistical_list{
          width: 25%;
          height: 115px;
          margin-right: @padding-md;
          background-color: #f0f5f9;
          border-radius: 5px;
          &:last-child{
            margin-right: 0;
          }
          p{
            text-align: center;
            margin: 0;
            &:nth-child(1){
              font-size: 36px;
              color: #fe8f01;
            }
            &:nth-child(2){
              font-size: 16px;
              color: #939292;
              font-weight: bold;
            }
            &:nth-child(3){
              font-size: 15px;
              color: #939292;
              padding: 4px 0;
            }
          }
        }
      }
      .chart{
        display: flex;
        padding: @padding-lg 0;
        .register_chart{
          width: 50%;
        }
        .login_chart{
          width: 50%;
          margin-left: 20px;
        }
        .chart_item{
          .title{
            font-size: 20px;
            font-weight: bold;
          }
          .date{
            font-style: 12px;
            color: #b0b0b0;
          }
          .chart_container{
            margin-top: @padding-lg;
          }
        }
      }
    }
  }
  .home_body_bottom{
    margin-top: 16px;
    height: calc(~"100% -  526px");
    display: flex;
    .left{
      width: 50%;
      background-color: @white;
      border-radius: 5px;
      padding: @padding-lg;
      .title{
        display: flex;
        justify-content: space-between;
        align-items: center;
        span{
          &:nth-child(1){
            font-size: 20px;
            font-weight: bold;
          }
          &:nth-child(2){
            cursor: pointer;
          }
        }
      }
      .msg{
        margin-top: @padding-lg;
        .msg_list{
          display: flex;
          justify-content: space-between;
          line-height: 35px;
          font-size: 16px;
          div{
            &:last-child{
              color: #939292;
            }
          }
        }
      }
    }
    .right{
      width: 50%;
      margin-left: 16px;
      background-color: @white;
      border-radius: 5px;
      padding: @padding-lg;
      .title{
        display: flex;
        justify-content: space-between;
        align-items: center;
        span{
          &:nth-child(1){
            font-size: 20px;
            font-weight: bold;
          }
          &:nth-child(2){
            cursor: pointer;
          }
        }
      }
      .business{
        margin-top: @padding-lg;
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
        .business_list{
          width: 49%;
          margin-bottom: 15px;
          height: 89px;
          display: flex;
          justify-content: center;
          align-items: center;
          font-size: 18px;
          background-color: #eaeaeb;
          border-radius: 8px;
          img{
            margin-right: 20px;
          }
        }
      }
    }
  }
}
</style>