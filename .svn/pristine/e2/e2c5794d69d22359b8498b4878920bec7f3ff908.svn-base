<template>
  <div class="work-chart">
    <div class="toggle">
      <span v-for="(tab, index) in toggleList" :key="index">
        {{tab.name}}
      </span>
    </div>
    <div class="main">
      <div class="total">
        <div class="total-list" v-for="(total, index) in totalList" :key="index">
          <div class="name">{{total.name}}</div>
          <div class="num">{{total.num}}</div>
          <div class="side"></div>
        </div>
      </div>
      <div class="chart">
        <div id="work" class="chart-container"></div>
      </div>
    </div>
  </div>
</template>

<script>
import { Chart } from '@antv/g2';

export default {
  props: {},
  components: {},
  data() {
    return {
      toggleList: [
        { name: '大厅运行情况' },
      ],
      totalList: [
        { name: '当日人数', num: 723 },
        { name: '当前人数', num: 24 },
        { name: '办事人数', num: 25 },
        { name: '等候人数', num: 8 },
        { name: '当日办件量', num: 645 },
        { name: '当日满意率', num: '100%' },
      ]
    };
  },
  watch: {},
  computed: {},
  created() {},
  mounted() {
    this.initChart();
  },
  methods: {
    initChart() {
      const data = [
        { year: '1991', value: 15468 },
        { year: '1992', value: 16100 },
        { year: '1993', value: 15900 },
        { year: '1994', value: 17409 },
        { year: '1995', value: 17000 },
        { year: '1996', value: 31056 },
        { year: '1997', value: 31982 },
        { year: '1998', value: 32040 },
        { year: '1999', value: 33233 },
      ];
      const chart = new Chart({
        container: 'work',
        autoFit: true,
        height: 50,
      });

      chart.data(data);
      chart.scale({
        value: {
          min: 10000,
          nice: true,
        },
        year: {
          range: [0, 1],
        },
      });
      chart.tooltip({
        showCrosshairs: true,
        shared: true,
      });

      chart.axis('value', {
        label: {
          formatter: (val) => {
            return (+val / 10000).toFixed(1) + 'k';
          },
        },
      });

      chart.area().position('year*value');
      chart.line().position('year*value');

      chart.render();
    }
  },
};
</script>
<style lang="less" scoped>
.work-chart{
  height: 100%;
  .toggle{
    padding: 10px @padding-lg;
    span{
      display: inline-block;
      border: 1px solid @primary-color;
      padding: @padding-xs 40px;
      border-radius: 5px;
    }
  }
  .main{
    height: calc(~'100% - 59px');
    .total{
      padding: @padding-xs @padding-lg;
      display: flex;
      .total-list{
        width: 16.66%;
        text-align: center;
        position: relative;
        &:nth-child(1){
          .side{
            display: none;
          }
        }
        .num{
          font-size: 20px;
          font-weight: bold;
          color: @primary-color;
        }
        .side{
          position: absolute;
          left: 0;
          top: 10px;
          width: 1px;
          height: 30px;
          background-color: #bbb;
        }
      }
    }
    .chart{
      height: calc(~'100% - 67px');
      padding: 0 @padding-lg;
      .chart-container{
        height: 100%;
        padding: @padding-xs 0;
      }
    }
  }
}
</style>