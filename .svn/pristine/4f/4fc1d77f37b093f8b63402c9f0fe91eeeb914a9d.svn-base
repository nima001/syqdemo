<template>
  <div class="org-main-panel">
    <div class="header">
      <!-- <div class="title">{{loadData && loadData.node.name}}</div> -->
      <div class="tabs">
        <a
          v-for="item in analysis"
          :key="item.id"
          :class="{ active: active === item.id }"
          @click="active = item.id"
          >{{ item.name }}</a
        >
      </div>
    </div>
    <div class="body">
      <!-- 分析模板未加载或正在加载内容，显示加载中 -->
      <a-spin :spinning="!analysis || loading" :delay="300" />

      <div>
        <!-- <a-popover placement="bottom" trigger="hover">
          <template slot="content">
            <a-spin :spinning="loading">
              <ul v-if="keyworlds.length > 0">
                <li
                  v-for="(item, index) in keyworlds"
                  :key="index"
                  @click="toGuide(item.id)"
                >
                  {{ item.name }}
                </li>
              </ul>
              <a-empty v-else />
            </a-spin>
          </template>
          <a-input-search
            class="select"
            placeholder="请输入事项名称"
            size="large"
            @search="searchKeyworlds"
            @change="keyworldsChange($event)"
          />
        </a-popover> -->
        <personnel v-if="active==0" :node="loadData.node"></personnel>
        <organization v-else :node="loadData.node"></organization>
      </div>
    </div>
  </div>
</template>
<script>
import { Button, Spin } from "ant-design-vue";
import FormDisplay from "@formdesign/views/FormDisplay";
import { components } from "@person/components/formdesign";
import EmptyData from "@framework/components/EmptyData";
import { showError } from "@framework/utils";
import Organization from "./components/organization";
import Personnel from "./components/personnel";
export default {
  props: {
    loadData: {
      type: Object,
    },
  },
  components: {
    AButton: Button,
    ASpin: Spin,
    FormDisplay,
    Organization,
    Personnel,
    ...components,
    EmptyData,
  },
  data() {
    return {
      analysis: [
        {
          id: 0,
          name: "人员花名册",
        },
        {
          id: 1,
          name: "组织编辑",
        },
      ],
      active: undefined,
      loading: false, //加载分析内容
      formData: undefined,
      report: undefined, //config/data/scope
    };
  },
  computed: {
    node() {
      return this.loadData && this.loadData.node;
    },
  },
  created() {
    this.init();
  },
  watch: {},
  methods: {
    init() {
        this.active=this.analysis[0].id
    //   querydisplay({
    //     type: 4, //指定分析类型（实名资源分析）
    //   })
    //     .then(({ result }) => {
    //       // this.analysis = result || [];
    //     })
    //     .catch((error) => {
    //       showError(error);
    //     });
    },
  },
};
</script>
<style lang="less" scoped>
.org-main-panel {
  display: flex;
  flex-direction: column;
  height: 100%;
  border-radius: @border-radius-base;
  & > .header {
    background: @white;
    margin-bottom: 10px;
    padding: @content-padding-v @content-padding-h;
    .title {
      flex: auto;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      font-weight: bold;
      font-size: 18px;
      line-height: 26px;
    }
    .tabs {
      padding: @content-padding-v 0px;
      min-height: 42px;
      a {
        display: inline-block;
        height: 26px;
        line-height: 26px;
        padding: 0 12px;
        margin-left: 6px;
        border-radius: @border-radius-base;
        &:first-child {
          margin-left: 0px;
        }
        &:hover {
          background: @primary-1;
        }
      }
      a.active {
        background-color: @primary-color;
        color: white;
        &:hover {
          background: lighten(@primary-color, 5%);
        }
      }
    }
  }

  & > .body {
    flex: 1 1 auto;
    overflow-y: auto;
    position: relative;
    background: #fff;
    >div{
        padding: 16px 24px;
    }
    .ant-spin {
      position: absolute;
      top: 38%;
      width: 100%;
      z-index: 10;
    }
  }
}
</style>