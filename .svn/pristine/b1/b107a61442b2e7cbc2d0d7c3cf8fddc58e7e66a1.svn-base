<template>
  <div class="lineChart" ref="chart"></div>
</template>

<script>
import DataSet from "@antv/data-set";
import { Chart } from "@antv/g2";
export default {
  components: {

  },
  props: {
    table: Array,
  },
  data() {
    return {
      chart: undefined
    };
  },
  watch: {
    table(table){
      if(this.chart){
        this.chart.changeData(table);
      }
    }
  },
  mounted() {
    this.draw();
  },
  methods: {
    draw() {
      if(this.chart){
        this.chart.destroy();
      }
      let chart = new Chart({
        container: this.$refs.chart,
        autoFit: true,
      });
      chart.scale({
        value: {
          nice: true,
        },
        year: {
          range: [0, 1],
        },
      });
      chart.tooltip({
        showCrosshairs: true,
      });

      chart.axis('编制数', false);

      chart.area().position('year*编制数').shape('smooth');
      chart.line().position('year*编制数').shape('smooth');;
      chart.data(this.table);
      chart.render();  
      this.chart = chart;
    }
  }
};
</script>
<style lang='less' scoped>
.lineChart {
  width: 100%;
  height: 180px;
}
</style>