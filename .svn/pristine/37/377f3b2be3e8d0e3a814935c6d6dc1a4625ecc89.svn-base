<template>
    <div class="unit-info">
        <div class="unit-info-top">
            <a-button v-if="ifedit" type="primary" @click="ifedit=false">编辑</a-button>
            <template v-else>
                <a-button type="primary" @click="save">保存</a-button>
                <a-button @click="ifedit=true" style="margin-left: 10px;">取消</a-button>
            </template>  
        </div>
        <a-form-model 
            ref="form"
            :model="form"
        >
            <p class="unit-info-title">基本信息</p>
            <a-row>
                <a-col :span='8'>
                    <a-form-model-item label="名称" v-bind="formItemLayout" >
                        <a-input v-model="form.name" :read-only="ifedit"></a-input>
                    </a-form-model-item>
                </a-col>
            </a-row>
            <p class="unit-info-title">组织信息</p>
            <a-row>
                <a-col :span='8'>
                    <a-form-model-item label="所在组织" v-bind="formItemLayout" >
                        <a-input v-model="form.orgname" :read-only="ifedit"></a-input>
                    </a-form-model-item>
                </a-col>
            </a-row>
            <a-row>
                <a-col :span='8'>
                    <a-form-model-item label="职务" v-bind="formItemLayout" >
                        <a-input v-model="form.position" :read-only="ifedit"></a-input>
                    </a-form-model-item>
                </a-col>
                 <a-col :span='8'>
                    <a-form-model-item label="岗位" v-bind="formItemLayout" >
                        <a-input v-model="form.job" :read-only="ifedit"></a-input>
                    </a-form-model-item>
                </a-col>
            </a-row>
            <p class="unit-info-title">联系信息</p>
            <a-row>
                <a-col :span='8'>
                    <a-form-model-item label="联系人" v-bind="formItemLayout" >
                        <a-input v-model="form.contactsname" :read-only="ifedit"></a-input>
                    </a-form-model-item>
                </a-col>
                <a-col :span='8'>
                    <a-form-model-item label="手机号码" v-bind="formItemLayout" >
                        <a-input v-model="form.mobilephone" :read-only="ifedit"></a-input>
                    </a-form-model-item>
                </a-col>
                <a-col :span='8'>
                    <a-form-model-item label="办公室电话" v-bind="formItemLayout" >
                        <a-input v-model="form.officephone" :read-only="ifedit"></a-input>
                    </a-form-model-item>
                </a-col>
            </a-row>
            <a-row>
                <a-col :span='8'>
                    <a-form-model-item label="邮箱" v-bind="formItemLayout" >
                        <a-input v-model="form.email" :read-only="ifedit"></a-input>
                    </a-form-model-item>
                </a-col>
            </a-row>
        </a-form-model>
        
        
    </div>
</template>

<script>
import {Row, Col, FormModel, Input, Button} from "ant-design-vue"
import { showError } from "@/framework/utils/index";
import {accountUpdate} from "@/idm/api/account";
export default {
    components: {
        ARow: Row,
        ACol: Col,
        AFormModel: FormModel,
        AFormModelItem: FormModel.Item,
        AInput: Input,
        AButton: Button,
    },
    name: 'UnitInfo',
    props: ["account"],
    created(){
        // this.form.username = this.account.username;
        // this.form.idcard = this.account.idcard;
        // this.form.orgname = this.account.orgname;
        // this.form.mobilephone = this.account.mobilephone;
        // this.form.officephone = this.account.officephone;
        // this.form.email = this.account.email;
        // this.form.sex=this.account.sex;
        // this.form.position=this.account.position;
        // this.form.job=this.account.job;
        // this.form.idtype=this.account.idtype;
        // this.form.officeaddress=this.account.officeaddress;
        // this.form.homeaddress=this.account.homeaddress;
        // this.form.virtualcornet=this.account.virtualcornet;
    },
    data() {
        return {
            formItemLayout: {
                labelCol: {
                span: 8 
                },
                wrapperCol: {
                span: 16 
                },
            },
            formItemLayout1: {
                labelCol: {
                span: 4 
                },
                wrapperCol: {
                span: 20 
                },
            },
            
            form: {
                name:'',
                orgname:'',
                position:'',
                job:'',
                mobilephone:'',
                officephone:'',
                email:'',
                contactsname:''
            },
            ifedit: true,
        };
    },
    methods: {
        save() {
            // let paramsform = this.form;
            // if(this.form.sex == '男'){
            //     paramsform.sex = 1
            // }else if(this.form.sex == '女'){
            //     paramsform.sex = 0
            // }else{
            //     delete paramsform.sex
            // };
            // if(this.form.mobilephone == this.account.mobilephone){
            //     delete paramsform.mobilephone
            // }
            // console.log(paramsform);
            // let params = Object.assign({},paramsform,{_id:this.account._id})
            //         accountUpdate(params).then(res=>{
            //             this.form.username = res.result.username;
            //             this.form.idcard = res.result.idcard;
            //             this.form.orgname = res.result.orgname;
            //             this.form.mobilephone = res.result.mobilephone;
            //             this.form.officephone = res.result.officephone;
            //             this.form.email = res.result.email;
            //             this.form.position=res.result.position;
            //             this.form.job=res.result.job;
            //             this.form.idtype=res.result.idtype;
            //             this.form.officeaddress=res.result.officeaddress;
            //             this.form.homeaddress=res.result.homeaddress;
            //             this.form.virtualcornet=res.result.virtualcornet;
            //             if(res.result.sex == 1){
            //                 this.form.sex = '男'
            //             }else if(res.result.sex == 0){
            //                 this.form.sex = '女'
            //             };
            //             this.$message.success('编辑成功')
            //             this.ifedit = true
            //         }).catch(err=>{
            //             showError(err);
            //         });
        }
    }
    
}
</script>

<style lang="less" scoped>
.unit-info{
    height: 100%;
    overflow-y: auto;
    margin: 30px 90px;
    padding-bottom: 80px;
    .unit-info-top{
        margin-bottom: 10px;
    }
    .unit-info-title{
        font-size: 25px;
        line-height: 40px;
        font-weight: bold;
        margin-bottom: 10px;
    }
}
</style>